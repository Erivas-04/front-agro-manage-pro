"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[763],{1763:(R,v,o)=>{o.r(v),o.d(v,{CagesModules:()=>V});var g=o(6814),p=o(9310),y=o(924),h=o(5219),e=o(5849),f=o(9784),d=o(3714),n=o(95),b=o(1532),m=o(707),C=o(3866),u=o(9250),Z=o(7213),_=o(4104),A=o(4480);let L=(()=>{class s{constructor(){this.close=new e.vpe,this.cageCreatedOutput=new e.vpe,this.cageService=(0,e.f3M)(f.Q),this.formBuilder=(0,e.f3M)(n.qu),this.cage=null}ngOnInit(){this.createCageForm=this.formBuilder.group({code:["",n.kI.required],name:["",n.kI.required],observations:[""],active:[!1]})}createCage(){if(this.createCageForm.invalid)return;const t=localStorage.getItem("asig"),i={user:parseInt(t),code:this.createCageForm.value.code,name:this.createCageForm.value.name,observations:this.createCageForm.value.observations,hability:this.createCageForm.value.active};this.cageService.post(i).subscribe({next:a=>{this.cageService.getOne(a.id).subscribe({next:l=>{this.createCageForm=this.formBuilder.group({code:["",n.kI.required],name:["",n.kI.required],observations:[""],active:[!1]}),this.cageCreatedOutput.emit(l)}})},error:a=>{console.error(a)}})}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-create-cage"]],outputs:{close:"close",cageCreatedOutput:"cageCreatedOutput"},decls:23,vars:1,consts:[[1,"grid"],[1,"col-12"],["name","createform",1,"p-fluid","p-formgrid","grid","field",3,"formGroup"],[1,"field","col-12","md:col-6"],["htmlfor","code"],["pInputText","","type","text","formControlName","code"],["htmlfor","name"],["pInputText","","type","text","formControlName","name"],[1,"field","col-12"],["htmlFor","observations"],["pInputText","","type","text","formControlName","observations"],[1,"field-checkbox","col-12"],["type","checkbox","formControlName","active","id","active"],["for","active"],[1,"flex","flex-wrap","gap-2","layout-footer"],["type","submit","pButton","",1,"p-button-info","p-button-text",3,"click"],["pButton","","type","submit","label","Crear",1,"p-button-success","submit-form-login",3,"click"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"label",4),e._uU(5,"Codigo"),e.qZA(),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"div",3)(8,"label",6),e._uU(9,"Nombre"),e.qZA(),e._UZ(10,"input",7),e.qZA(),e.TgZ(11,"div",8)(12,"label",9),e._uU(13,"Observaciones"),e.qZA(),e._UZ(14,"input",10),e.qZA(),e.TgZ(15,"div",11),e._UZ(16,"input",12),e.TgZ(17,"label",13),e._uU(18,"Activado"),e.qZA()()(),e.TgZ(19,"div",14)(20,"button",15),e.NdJ("click",function(){return a.close.emit()}),e._uU(21,"Salir"),e.qZA(),e.TgZ(22,"button",16),e.NdJ("click",function(){return a.createCage()}),e.qZA()()()()),2&i&&(e.xp6(2),e.Q6J("formGroup",a.createCageForm))},dependencies:[d.o,n._Y,n.Fj,n.Wl,n.JJ,n.JL,n.sg,n.u,m.Hq],encapsulation:2})}return s})();var U=o(1474),F=o(6098);let D=(()=>{class s{constructor(){this.http=(0,e.f3M)(U.eN),this.base=F.h.cageUrl}asigAnimal(t,i){return this.http.put(`${this.base}/asig/${t}/animal`,i)}asigConcentrate(t,i){return this.http.put(`${this.base}/asig/${t}/animal/food`,i)}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var w=o(9590),T=o(5779),x=o(5609),S=o(354);function I(s,c){if(1&s&&(e.TgZ(0,"div",6)(1,"form",7)(2,"div",8),e._UZ(3,"input",9),e.qZA(),e.TgZ(4,"div",8),e._UZ(5,"input",10),e.qZA(),e.TgZ(6,"div",11),e._UZ(7,"input",12),e.qZA(),e.TgZ(8,"div",13),e._UZ(9,"p-inputSwitch",14),e.TgZ(10,"label",15),e._uU(11,"Activo"),e.qZA()()()()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.updateCageForm)}}function q(s,c){if(1&s&&(e.TgZ(0,"div",6)(1,"form",16)(2,"div",8)(3,"span",17),e._UZ(4,"p-inputNumber",18),e.TgZ(5,"label",19),e._uU(6,"Cantidad de animales"),e.qZA()()(),e.TgZ(7,"div",8)(8,"span",17),e._UZ(9,"p-dropdown",20),e.TgZ(10,"label",21),e._uU(11,"Animal seleccionado"),e.qZA()()()()()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.asigAnimalForm),e.xp6(8),e.Q6J("options",t.animalsList)}}function M(s,c){if(1&s&&(e.TgZ(0,"div",6)(1,"form",16)(2,"div",8)(3,"span",17),e._UZ(4,"p-inputNumber",22),e.TgZ(5,"label",23),e._uU(6,"Cantidad de concentrado"),e.qZA()()(),e.TgZ(7,"div",8)(8,"span",17),e._UZ(9,"p-dropdown",24),e.TgZ(10,"label",25),e._uU(11,"Animal seleccionado"),e.qZA()()()()()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.asigConcentrateForm),e.xp6(8),e.Q6J("options",t.concentrateList)}}function O(s,c){1&s&&(e.TgZ(0,"h1"),e._uU(1,"Algo salio mal"),e.qZA())}let J=(()=>{class s{constructor(){this.close=new e.vpe,this.modify=new e.vpe,this.formBuilder=(0,e.f3M)(n.qu),this.cageService=(0,e.f3M)(f.Q),this.cagesAsign=(0,e.f3M)(D),this.animalsSerivice=(0,e.f3M)(y.L),this.concentratesSerivce=(0,e.f3M)(w.i),this.animalsList=[],this.concentrateList=[],this.actionSelect=0,this.items=[{label:"Modificar corral",command:()=>{this.actionSelect=0}},{label:"Asignar animal",command:()=>{this.actionSelect=1}},{label:"Asignar concentrado",command:()=>{this.actionSelect=2}}]}ngOnInit(){this.updateCageForm=this.formBuilder.group({code:[this.cage.code,n.kI.required],name:[this.cage.name,n.kI.required],active:[this.cage.active],observations:[this.cage.observations]}),this.asigAnimalForm=this.formBuilder.group({animal:[this.cage.animalAsigned.animalId,n.kI.required],animal_amount:[this.cage.animalAsigned.animalAmount,n.kI.required]}),this.asigConcentrateForm=this.formBuilder.group({animal_food:[this.cage.concentrateAsigned.concentrateId,n.kI.required],animal_food_amount:[this.cage.concentrateAsigned.concentrateAmount,n.kI.required]});const t=localStorage.getItem("asig");this.animalsSerivice.get(parseInt(t)).subscribe({next:i=>{i.forEach((a,l)=>{a.hability&&this.animalsList.push({label:a.animal_name,value:a.id})})}}),this.concentratesSerivce.get(parseInt(t)).subscribe({next:i=>{i.forEach((a,l)=>{a.hability&&this.concentrateList.push({label:a.concentrate_name,value:a.id})})}})}saveUpdates(){0==this.actionSelect?this.cageService.put(this.updateCageForm.value,this.cage.id).subscribe({next:i=>{this.modify.emit(i)},error:i=>{console.error(i)}}):1==this.actionSelect?this.cagesAsign.asigAnimal(this.cage.id,this.asigAnimalForm.value).subscribe({next:i=>{this.modify.emit(i)},error:i=>{console.error(i)}}):2==this.actionSelect&&this.cagesAsign.asigConcentrate(this.cage.id,this.asigConcentrateForm.value).subscribe({next:i=>{this.modify.emit(i)},error:i=>{console.error(i)}})}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-modify-cage"]],inputs:{cage:"cage"},outputs:{close:"close",modify:"modify"},decls:10,vars:2,consts:[[1,"col-12"],["styleClass","mt-6",3,"model"],["class","col-12 p-fluid"],[1,"flex","flex-wrap","gap-2","layout-footer"],["type","submit","pButton","",1,"p-button-info","p-button-text",3,"click"],["pButton","","type","submit","label","Guardar",1,"p-button-success","submit-form-login",3,"click"],[1,"col-12","p-fluid"],[1,"p-formgrid","field","grid",3,"formGroup"],[1,"md:col-6"],["type","text","pInputText","","formControlName","code"],["type","text","pInputText","","formControlName","name"],[1,"md:col-12"],["type","text","pInputText","","formControlName","observations"],[1,"field-checkbox"],["formControlName","active","id","active"],["for","active"],[1,"p-formgrid","field","grid","dropdown-field",3,"formGroup"],[1,"p-float-label"],["inputId","inputAnimalAmount","formControlName","animal_amount"],["for","inputAnimalAmount"],["inputId","animal","formControlName","animal",3,"options"],["for","animal"],["inputId","animal_food_amount","formControlName","animal_food_amount"],["for","animal_food_amount"],["inputId","animal_food","formControlName","animal_food",3,"options"],["for","animal_food"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"p-tabMenu",1),e.YNc(2,I,12,1,"div",2)(3,q,12,2)(4,M,12,2)(5,O,2,0),e.TgZ(6,"div",3)(7,"button",4),e.NdJ("click",function(){return a.close.emit()}),e._uU(8,"Regresar"),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return a.saveUpdates()}),e.qZA()()()),2&i&&(e.xp6(1),e.Q6J("model",a.items),e.xp6(1),e.um2(2,0==a.actionSelect?2:1==a.actionSelect?3:2==a.actionSelect?4:5))},dependencies:[d.o,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,m.Hq,C.Lt,T.d,x.Ql,S.Rn],encapsulation:2})}return s})();function N(s,c){1&s&&(e.TgZ(0,"tr")(1,"th",23),e._uU(2,"Codigo "),e._UZ(3,"p-sortIcon",24),e.qZA(),e.TgZ(4,"th"),e._uU(5,"Nombre"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Animal"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"# animales"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Concentrado"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"# concentrado"),e.qZA()())}function H(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"tr",25),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.modifyCage(l))}),e.TgZ(1,"td",26),e._uU(2),e.qZA(),e.TgZ(3,"td",27),e._uU(4),e.qZA(),e.TgZ(5,"td",28),e._uU(6),e.qZA(),e.TgZ(7,"td",26),e._uU(8),e.qZA(),e.TgZ(9,"td",28),e._uU(10),e.qZA(),e.TgZ(11,"td",26),e._uU(12),e.ALo(13,"number"),e.qZA()()}if(2&s){const t=c.$implicit;e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.animalAsigned.animalName),e.xp6(2),e.Oqu(t.animalAsigned.animalAmount),e.xp6(2),e.Oqu(t.concentrateAsigned.concentrateName),e.xp6(2),e.Oqu(e.xi3(13,6,t.concentrateAsigned.concentrateAmount,"1.2-2"))}}function E(s,c){if(1&s){const t=e.EpF();e.TgZ(0,"app-modify-cage",29),e.NdJ("close",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeCreation())})("modify",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.cageModified(a))}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("cage",t.cageSelect)}}const B=()=>({width:"30vw"}),k=()=>({"960px":"75vw"}),Q=()=>({width:"80vw"});let K=(()=>{class s{constructor(){this.cageService=(0,e.f3M)(f.Q),this.animalService=(0,e.f3M)(y.L),this.router=(0,e.f3M)(p.F0),this.messageService=(0,e.f3M)(h.ez),this.display=!1,this.createCage=!1,this.show=!1,this.modifi=!1,this.cagesList=[],this.animals=[],this.cageSelect=null}ngOnInit(){const t=localStorage.getItem("asig");this.getData(t),this.animalService.get(parseInt(t)).subscribe({next:i=>{i.forEach((a,l)=>{a.hability&&this.animals.push({label:a.animal_name,value:a.id})})}})}getData(t){this.cageService.get(parseInt(t)).subscribe({next:i=>{this.cagesList=i},error:i=>{console.error(i),this.router.navigate(["/login"])}})}cageModified(t){this.messageService.add({key:"modify",severity:"info",summary:"Corral actualizado",detail:t.message})}modifyCage(t){this.display&&this.messageService.add({key:"create",severity:"success",summary:"Corral creado",detail:"Corral creado correctamente"}),this.cageSelect=t,this.display=!1,this.modifi=!0}closeCreation(){const t=localStorage.getItem("asig");this.getData(t),this.display=!1,this.createCage=!1,this.show=!1,this.modifi=!1,this.cageSelect=null}SearchCage(){console.log("")}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-cages"]],features:[e._Bn([h.ez])],decls:34,vars:20,consts:[[1,"card"],[1,"grid","p-fluid","mt-3","field"],[1,"field","col-12","md:col-2"],[1,"p-float-label"],["type","text","id","codigo_busqueda_corral","pInputText",""],["for","codigo"],[1,"field","col-12","md:col-3"],["inputId","fecha_inicio_uso"],["for","calendar"],["inputId","animal",3,"options"],["for","animal"],["icon","pi pi-fw pi-search","pButton","","pRipple","","label","Buscar",3,"click"],["type","button","icon","pi pi-plus","pButton","","pRipple","","label","Crear corral",1,"p-button-success",3,"click"],["header","Crear corral","showEffect","fade",3,"visible","modal","breakpoints","visibleChange"],[3,"close","cageCreatedOutput"],[1,""],["responsiveLayout","scroll","scrollDirection","both","scrollHeight","400px",3,"value","scrollable","paginator","rows"],["pTemplate","header"],["pTemplate","body"],["header","Opciones de corral","showEffect","fade",3,"visible","modal","breakpoints","visibleChange"],[3,"cage"],["key","create"],["key","modify"],["pSortableColumn","code"],["field","code"],[3,"click"],[2,"width","10%"],[2,"width","26%"],[2,"width","16%"],[3,"cage","close","modify"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"span",3),e._UZ(4,"input",4),e.TgZ(5,"label",5),e._uU(6,"Codigo"),e.qZA()()(),e._UZ(7,"div",6),e.TgZ(8,"div",2)(9,"span",3),e._UZ(10,"p-calendar",7),e.TgZ(11,"label",8),e._uU(12,"Fecha de uso"),e.qZA()()(),e._UZ(13,"div",6),e.TgZ(14,"div",2)(15,"span",3),e._UZ(16,"p-dropdown",9),e.TgZ(17,"label",10),e._uU(18,"Animal"),e.qZA()()(),e.TgZ(19,"div",2)(20,"button",11),e.NdJ("click",function(){return a.SearchCage()}),e.qZA()(),e._UZ(21,"div",6),e.TgZ(22,"div",2)(23,"button",12),e.NdJ("click",function(){return a.display=!0}),e.qZA()()(),e.TgZ(24,"p-dialog",13),e.NdJ("visibleChange",function(r){return a.display=r}),e.TgZ(25,"app-create-cage",14),e.NdJ("close",function(){return a.closeCreation()})("cageCreatedOutput",function(r){return a.modifyCage(r)}),e.qZA()(),e.TgZ(26,"div",15)(27,"p-table",16),e.YNc(28,N,14,0,"ng-template",17)(29,H,14,9,"ng-template",18),e.qZA()(),e.TgZ(30,"p-dialog",19),e.NdJ("visibleChange",function(r){return a.modifi=r}),e.YNc(31,E,1,1,"app-modify-cage",20),e.qZA(),e._UZ(32,"p-toast",21)(33,"p-toast",22),e.qZA()),2&i&&(e.xp6(16),e.Q6J("options",a.animals),e.xp6(8),e.Akn(e.DdM(16,B)),e.Q6J("visible",a.display)("modal",!0)("breakpoints",e.DdM(17,k)),e.xp6(3),e.Q6J("value",a.cagesList)("scrollable",!1)("paginator",!0)("rows",10),e.xp6(3),e.Akn(e.DdM(18,Q)),e.Q6J("visible",a.modifi)("modal",!0)("breakpoints",e.DdM(19,k)),e.xp6(1),e.um2(31,a.modifi?31:-1))},dependencies:[d.o,n._Y,n.JL,n.F,b.f,m.Hq,h.jx,C.Lt,u.iA,u.lQ,u.fz,Z.V,_.FN,A.H,L,J,g.JJ],encapsulation:2})}return s})(),z=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[p.Bz.forChild([{path:"",component:K}]),p.Bz]})}return s})();var G=o(1122),$=o(74);let j=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[g.ez]})}return s})(),V=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[g.ez,z,d.j,n.u5,n.UX,b._8,C.kW,u.U$,Z.S,m.hJ,G.$9,_.EV,A.T,$.ml,j,T.i,x.Iu,S.L$]})}return s})()}}]);